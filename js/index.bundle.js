document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("add-modal"),t=document.getElementById("edit-modal"),n=document.getElementById("save-place"),c=document.getElementById("save-profile"),o=document.getElementById("place-name"),a=document.getElementById("place-url"),s=document.getElementById("name"),l=document.getElementById("job"),r=document.querySelector(".cards__wrapper"),d=document.querySelector(".icon--edit-button"),i=document.querySelector(".icon--add-button"),m=document.querySelectorAll(".close, .close-modal"),u=document.querySelector(".avatar-desc__title"),g=document.querySelector(".avatar-desc__sub-title"),v=[{name:"Карачаевск",imageUrl:"./img/cards/1.jpg"},{name:"Гора Эльбрус",imageUrl:"./img/cards/2.jpg"},{name:"Домбай",imageUrl:"./img/cards/3.jpg"}];function p(e,t){const n=document.createElement("div");return n.classList.add("card"),n.innerHTML=`\n\t\t  <img src="${t}" alt="${e}">\n\t\t  <div class="title-wrapper">\n\t\t\t<h3 class="title">${e}</h3>\n\t\t\t<svg class="icon icon--heart">\n\t\t\t\t<use href="./img/svgsprite/sprite.symbol.svg#heart"></use>\n\t\t\t</svg>\n\t\t  </div>\n\t\t  <svg class="icon icon--trash">\n\t\t\t\t<use href="./img/svgsprite/sprite.symbol.svg#trash"></use>\n\t\t  </svg>\n\t\t`,n.querySelector(".icon--trash").addEventListener("click",(()=>{n.remove(),E()})),n}function y(e){e.style.display="flex",setTimeout((()=>e.classList.add("show")),10)}function f(e){e.classList.remove("show"),setTimeout((()=>{e.style.display="none"}),300)}function E(){const e=[];document.querySelectorAll(".card").forEach((t=>{const n=t.querySelector(".title").textContent,c=t.querySelector("img").src;e.push({name:n,imageUrl:c})})),localStorage.setItem("cards",JSON.stringify(e))}n.addEventListener("click",(function(t){t.preventDefault();const n=o.value.trim(),c=a.value.trim();if(n&&c){const t=p(n,c);r.prepend(t),E(),o.value="",a.value="",f(e)}})),document.body.addEventListener("click",(function(e){const t=e.target.closest(".icon--trash");if(t){const e=t.closest(".card");e&&(e.remove(),E())}})),d.addEventListener("click",(()=>{s.value=u.textContent,l.value=g.textContent,y(t)})),i.addEventListener("click",(()=>y(e))),m.forEach((e=>{e.addEventListener("click",(function(){f(this.closest(".modal"))}))})),window.addEventListener("click",(e=>{e.target.classList.contains("modal")&&f(e.target)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&document.querySelectorAll(".modal.show").forEach(f)})),c.addEventListener("click",(()=>{u.textContent=s.value,g.textContent=l.value,localStorage.setItem("profile",JSON.stringify({name:s.value,job:l.value})),f(t)})),function(){const e=JSON.parse(localStorage.getItem("profile"));e&&(u.textContent=e.name,g.textContent=e.job)}(),function(){const e=JSON.parse(localStorage.getItem("cards"));e&&0!==e.length?e.forEach((({name:e,imageUrl:t})=>{r.append(p(e,t))})):(v.forEach((({name:e,imageUrl:t})=>{r.append(p(e,t))})),E())}()}));